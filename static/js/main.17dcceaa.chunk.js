(this.webpackJsonpcheckers=this.webpackJsonpcheckers||[]).push([[0],{29:function(e,t,i){},30:function(e,t,i){},77:function(e,t,i){"use strict";i.r(t);var r=i(0),a=i.n(r),n=i(7),s=i.n(n),o=(i(29),i(24)),c=i(8),l=(i(30),i(19)),u=i(1),h=i(4),d=i(5),b=function(){function e(){Object(h.a)(this,e),this.initialRow=0,this.initialCol=0,this.startRow=0,this.startCol=0,this.endRow=0,this.endCol=0,this.listCaptureRow=[],this.listCaptureCol=[],this.listVisitedRow=[],this.listVisitedCol=[],this.capturedSquares=new Set,this.state=[]}return Object(d.a)(e,null,[{key:"fill_1",value:function(t,i,r,a,n){var s=new e;return s.startRow=t,s.startCol=i,s.endRow=r,s.endCol=a,s.state=n,s.listCaptureRow=[],s.listCaptureCol=[],s.listVisitedRow=[],s.listVisitedCol=[],s.capturedSquares=new Set,s}},{key:"fill_2",value:function(t){var i=new e;return i.initialRow=t.initialRow,i.initialCol=t.initialCol,i.startRow=t.startRow,i.startCol=t.startCol,i.endRow=t.endRow,i.endCol=t.endCol,i.listVisitedRow=t.listVisitedRow.slice(),i.listVisitedCol=t.listVisitedCol.slice(),i.listCaptureRow=t.listCaptureRow.slice(),i.listCaptureCol=t.listCaptureCol.slice(),i.capturedSquares=new Set,t.capturedSquares.forEach((function(e){i.capturedSquares.add(e)})),i.state=[],t.state.forEach((function(e){i.state.push(e.slice())})),i}}]),e}(),p=function(){function e(){Object(h.a)(this,e),this.board=[],this.currentPlayer=1,this.timeLimit=3,this.russianRules=!1}return Object(d.a)(e,[{key:"setCurrentState",value:function(e,t,i){this.currentPlayer=t,this.timeLimit=i;for(var r=0;r<8;r++)for(var a=0;a<8;a++)e[r][a]>=0&&(this.board[r][a]=e[r][a]%10)}},{key:"newGame",value:function(){this.board=new Array(8).fill(0).map((function(){return new Array(8).fill(0)}));for(var e=0;e<3;e++)for(var t=0;t<8;t+=2)1===(1&e)?(this.board[e][t+1]=-1,this.board[e][t]=1):(this.board[e][t]=-1,this.board[e][t+1]=1);for(var i=3;i<5;i++)for(var r=0;r<8;r+=2)1===(1&i)?(this.board[i][r+1]=-1,this.board[i][r]=0):(this.board[i][r]=-1,this.board[i][r+1]=0);for(var a=5;a<8;a++)for(var n=0;n<8;n+=2)1===(1&a)?(this.board[a][n+1]=-1,this.board[a][n]=2):(this.board[a][n]=-1,this.board[a][n+1]=2)}},{key:"getLegalMoves",value:function(e){for(var t=[],i=[],r=0;r<8;r++)for(var a=0;a<8;a++)1===this.currentPlayer?1!==this.board[r][a]&&3!==this.board[r][a]||(this.getJumps(i,null,this.board[r][a],r,a,e),0===i.length&&this.getSlides(t,this.board[r][a],r,a,this.board)):2!==this.board[r][a]&&4!==this.board[r][a]||(this.getJumps(i,null,this.board[r][a],r,a,e),0===i.length&&this.getSlides(t,this.board[r][a],r,a,this.board));return 0===i.length?t:i}},{key:"getSlides",value:function(t,i,r,a,n){var s=[],o=[],c=[];switch(i){case 1:s.push(r+1),s.push(r+1),o.push(a+1),o.push(a-1);break;case 2:s.push(r-1),s.push(r-1),o.push(a+1),o.push(a-1);break;case 3:case 4:if(!this.russianRules){s.push(r+1),s.push(r+1),s.push(r-1),s.push(r-1),o.push(a+1),o.push(a-1),o.push(a+1),o.push(a-1);break}for(var l=0;l<4;l++)for(var u=r,h=a,d=e.directions[l].y,p=e.directions[l].x,m=1;m<=7&&(h+=p,!((u+=d)<0||u>7||h<0||h>7));m++)s.push(u),o.push(h),c.push({len:m,dir_y:e.directions[l].y,dir_x:e.directions[l].x})}for(var g=s.length,f=0;f<g;f++)if(!(s[f]<0||s[f]>7||o[f]<0||o[f]>7)&&0===n[s[f]][o[f]]){if((3===i||4===i)&&this.russianRules){for(var w=!1,v=c[f],y=1;y<c[f].len;y++)if(0!==n[r+v.dir_y*y][a+v.dir_x*y]){w=!0;break}if(w)continue}t.push(b.fill_1(r,a,s[f],o[f],n))}}},{key:"getJumps",value:function(t,i,r,a,n,s){var o=[],c=[],l=[],u=[],h=[];if(this.russianRules)switch(r){case 1:case 2:o.push(a+2),o.push(a+2),o.push(a-2),o.push(a-2),c.push(n-2),c.push(n+2),c.push(n-2),c.push(n+2),l.push(a+1),l.push(a+1),l.push(a-1),l.push(a-1),u.push(n-1),u.push(n+1),u.push(n-1),u.push(n+1);break;case 3:case 4:for(var d=0;d<4;d++)for(var p=e.directions[d].y,m=e.directions[d].x,g=a+p,f=n+m,w=1;w<=7&&(f+=m,!((g+=p)<0||g>7||f<0||f>7));w++)o.push(g),c.push(f),l.push(g-p),u.push(f-m),h.push({len:w,dir_y:e.directions[d].y,dir_x:e.directions[d].x})}else switch(r){case 1:o.push(a+2),o.push(a+2),c.push(n-2),c.push(n+2),l.push(a+1),l.push(a+1),u.push(n-1),u.push(n+1);break;case 2:o.push(a-2),o.push(a-2),c.push(n-2),c.push(n+2),l.push(a-1),l.push(a-1),u.push(n-1),u.push(n+1);break;case 3:case 4:o.push(a+2),o.push(a+2),o.push(a-2),o.push(a-2),c.push(n-2),c.push(n+2),c.push(n-2),c.push(n+2),l.push(a+1),l.push(a+1),l.push(a-1),l.push(a-1),u.push(n-1),u.push(n+1),u.push(n-1),u.push(n+1)}for(var v=o.length,y=!1,k=new Array(v).fill(!1),C=0;C<v;C++)if(!(o[C]<0||o[C]>7||c[C]<0||c[C]>7)){if(null!==i){if(0!==s[o[C]][c[C]]&&s[o[C]][c[C]]!==s[i.initialRow][i.initialCol])continue;if(i.capturedSquares.has(100*l[C]+u[C]))continue}else if(0!==s[o[C]][c[C]])continue;if((3===r||4===r)&&this.russianRules){for(var j=!1,O=h[C],R=1;R<h[C].len;R++)if(0!==s[a+O.dir_y*R][n+O.dir_x*R]){j=!0;break}if(j)continue}1===this.currentPlayer&&2!==s[l[C]][u[C]]&&4!==s[l[C]][u[C]]||2===this.currentPlayer&&1!==s[l[C]][u[C]]&&3!==s[l[C]][u[C]]||(y=!0,k[C]=!0)}if(null===i||y){if(null===i&&y)for(var A=0;A<v;A++)if(k[A]){var S=b.fill_1(a,n,o[A],c[A],s);S.initialRow=a,S.initialCol=n,S.startRow=a,S.startCol=n,S.endRow=o[A],S.endCol=c[A],S.listCaptureRow.push(l[A]),S.listCaptureCol.push(u[A]),S.listVisitedRow.push(o[A]),S.listVisitedCol.push(c[A]),S.capturedSquares.add(100*l[A]+u[A]),this.getJumps(t,S,r,S.endRow,S.endCol,s)}if(null!==i&&y)for(var x=0;x<v;x++)if(k[x]){var I=b.fill_2(i);I.startRow=a,I.startCol=n,I.endRow=o[x],I.endCol=c[x],I.listCaptureRow.push(l[x]),I.listCaptureCol.push(u[x]),I.listVisitedRow.push(o[x]),I.listVisitedCol.push(c[x]),I.capturedSquares.add(100*l[x]+u[x]),this.getJumps(t,I,r,I.endRow,I.endCol,s)}}else t.push(i)}},{key:"applyMove",value:function(e,t){if(0===e.listCaptureRow.length)t[e.endRow][e.endCol]=t[e.startRow][e.startCol],1===t[e.startRow][e.startCol]&&7===e.endRow&&(t[e.endRow][e.endCol]+=2),2===t[e.startRow][e.startCol]&&0===e.endRow&&(t[e.endRow][e.endCol]+=2),t[e.startRow][e.startCol]=0;else{for(var i=0;i<e.listCaptureRow.length;i++)t[e.listCaptureRow[i]][e.listCaptureCol[i]]=0;t[e.endRow][e.endCol]=t[e.initialRow][e.initialCol],1===t[e.initialRow][e.initialCol]&&7===e.endRow&&(t[e.endRow][e.endCol]+=2),2===t[e.initialRow][e.initialCol]&&0===e.endRow&&(t[e.endRow][e.endCol]+=2),t[e.initialRow][e.initialCol]=0}this.currentPlayer=1===this.currentPlayer?2:1}}],[{key:"EmptyGameStatic",value:function(){return new e}},{key:"GameStatic",value:function(t){var i=new e;i.board=[];for(var r=0;r<t.board.length;r++)i.board.push(t.board[r].slice());return i.currentPlayer=t.currentPlayer,i.timeLimit=t.timeLimit,i}}]),e}();p.directions=[{y:1,x:1},{y:-1,x:1},{y:1,x:-1},{y:-1,x:-1}];var m=p,g=function(){function e(t,i){Object(h.a)(this,e),this.maximizingPlayer=0,this.maxDepth=0,this.timeLimit=2,this.heuristicType=0,this.startTime=0,this.currentTime=0,this.outOfTime=!1,this.numAllyPieces=0,this.numAllyKings=0,this.numOppPieces=0,this.numOppKings=0,this.maximizingPlayer=t,this.heuristicType=i}return Object(d.a)(e,[{key:"alphaBetaSearch",value:function(e){var t=new Date;this.startTime=t.getTime(),this.getBoardStatus(e),this.outOfTime=!1;var i=0,r=0,a=null,n=[],s=e.getLegalMoves(e.board);if(1===s.length)return console.log("Searched to depth 0 in 0 seconds."),s[0];for(this.maxDepth=0;this.maxDepth<15&&!this.outOfTime;this.maxDepth++){n=[];for(var o=Number.NEGATIVE_INFINITY,c=0;c<s.length;c++){var l=s[c],u=m.GameStatic(e);u.applyMove(l,u.board);var h=this.minVal(u,Number.NEGATIVE_INFINITY,Number.MAX_VALUE,0);if(this.outOfTime)break;if(h===o&&n.push(l),h>o&&(n.length=0,n.push(l),o=h),o===Number.MAX_VALUE)break}if(!this.outOfTime)a=n[Math.floor(Math.random()*n.length)],r=this.maxDepth,i=o;if(i===Number.MAX_VALUE)break}return console.log("Searched to depth "+r+" in "+(this.currentTime-this.startTime)/1e3+" seconds."),a}},{key:"cutoffTest",value:function(e,t){return 0===e||t===this.maxDepth}},{key:"evalFcn",value:function(e){switch(this.heuristicType){case 1:return this.easyHeuristic(e);case 2:return this.mediumHeuristic(e);case 3:default:return this.hardHeuristic(e)}}},{key:"hardHeuristic",value:function(e){for(var t=e.board.length,i=e.board[0].length,r=0,a=0,n=0,s=0,o=0,c=0;c<t;c++)for(var l=0;l<i;l++)if(1===this.maximizingPlayer)switch(e.board[c][l]){case 1:a++,r+=50*this.numDefendingNeighbors(c,l,e.board)+this.backBonus(c)+15*c+this.middleBonus(c,l);break;case 2:s++,r-=50*this.numDefendingNeighbors(c,l,e.board)+this.backBonus(c)+15*(7-c)+this.middleBonus(c,l);break;case 3:n++,r+=this.middleBonus(c,l);break;case 4:o++,r-=this.middleBonus(c,l)}else switch(e.board[c][l]){case 1:s++,r-=50*this.numDefendingNeighbors(c,l,e.board)+this.backBonus(c)+15*c+this.middleBonus(c,l);break;case 2:a++,r+=50*this.numDefendingNeighbors(c,l,e.board)+this.backBonus(c)+15*(7-c)+this.middleBonus(c,l);break;case 3:o++,r-=this.middleBonus(c,l);break;case 4:n++,r+=this.middleBonus(c,l)}if(this.numAllyPieces+this.numAllyKings>this.numOppPieces+this.numOppKings&&s+o!==0&&this.numOppPieces+this.numOppKings!==0&&1!==this.numOppKings&&((a+n)/(s+o)>(this.numAllyPieces+this.numAllyKings)/(this.numOppPieces+this.numOppKings)?r+=150:r-=150),r+=600*a+1e3*n-600*s-1e3*o,this.numOppPieces+this.numOppKings<6||this.numAllyPieces+this.numAllyKings<6){var u=e.currentPlayer;e.currentPlayer=1;var h=e.getLegalMoves(e.board);e.currentPlayer=2;var d=e.getLegalMoves(e.board);if(e.currentPlayer=u,0===h.length)return 1===this.maximizingPlayer?Number.NEGATIVE_INFINITY:Number.MAX_VALUE;if(0===d.length)return 2===this.maximizingPlayer?Number.NEGATIVE_INFINITY:Number.MAX_VALUE}return s+o===0&&a+n>0&&(r=Number.MAX_VALUE),a+n===0&&s+o>0&&(r-=Number.MIN_VALUE),r}},{key:"mediumHeuristic",value:function(e){for(var t=e.board.length,i=e.board[0].length,r=0,a=0;a<t;a++)for(var n=0;n<i;n++)if(1===this.maximizingPlayer)switch(e.board[a][n]){case 1:r+=3+.5*a+this.numDefendingNeighbors(a,n,e.board),0!==n&&8!==n||(r+=1),0===a&&(r+=2);break;case 2:r-=3+.5*(7-a)+this.numDefendingNeighbors(a,n,e.board),0!==n&&8!==n||(r-=1),7===a&&(r-=2);break;case 3:r+=5+this.numDefendingNeighbors(a,n,e.board),0!==n&&8!==n||(r+=1),0===a&&(r+=2);break;case 4:r-=5+this.numDefendingNeighbors(a,n,e.board),0!==n&&8!==n||(r-=1),7===a&&(r-=2)}else switch(e.board[a][n]){case 1:r-=3+.5*a+this.numDefendingNeighbors(a,n,e.board),0!==n&&8!==n||(r-=1),0===a&&(r-=2);break;case 2:r+=3+.5*(7-a)+this.numDefendingNeighbors(a,n,e.board),0!==n&&8!==n||(r+=1),7===a&&(r+=2);break;case 3:r-=5+this.numDefendingNeighbors(a,n,e.board),0!==n&&8!==n||(r-=1),0===a&&(r-=2);break;case 4:r+=5+this.numDefendingNeighbors(a,n,e.board),0!==n&&8!==n||(r+=1),7===a&&(r+=2)}return r}},{key:"easyHeuristic",value:function(e){for(var t=e.board.length,i=e.board[0].length,r=0,a=0;a<t;a++)for(var n=0;n<i;n++)if(1===this.maximizingPlayer)switch(e.board[a][n]){case 1:r+=3;break;case 2:r-=3;break;case 3:r+=5;break;case 4:r-=5}else switch(e.board[a][n]){case 1:r-=3;break;case 2:r+=3;break;case 3:r-=5;break;case 4:r+=5}return r}},{key:"maxVal",value:function(e,t,i,r){var a=this,n=new Date;if(this.currentTime=n.getTime(),this.currentTime-this.startTime>=990*this.timeLimit)return this.outOfTime=!0,0;var s=e.getLegalMoves(e.board);if(this.cutoffTest(s.length,r))return this.evalFcn(e);var o=Number.NEGATIVE_INFINITY;return s.forEach((function(n){var s=m.GameStatic(e);if(s.applyMove(n,s.board),(o=Math.max(o,a.minVal(s,t,i,r+1)))>=i)return o;t=Math.max(t,o)})),o}},{key:"minVal",value:function(e,t,i,r){var a=this,n=new Date;if(this.currentTime=n.getTime(),this.currentTime-this.startTime>990*this.timeLimit)return this.outOfTime=!0,0;var s=e.getLegalMoves(e.board);if(this.cutoffTest(s.length,r))return this.evalFcn(e);var o=Number.MAX_VALUE;return s.forEach((function(n){var s=m.GameStatic(e);if(s.applyMove(n,s.board),(o=Math.min(o,a.maxVal(s,t,i,r+1)))<=t)return o;i=Math.min(i,o)})),o}},{key:"numDefendingNeighbors",value:function(e,t,i){var r=0;switch(i[e][t]){case 1:e+1<i.length&&t+1<i[0].length&&1===(1&i[e+1][t+1])&&(r+=1),e+1<i.length&&t-1>=0&&1===(1&i[e+1][t-1])&&(r+=1);break;case 2:e-1>=0&&t+1<i[0].length&&0===(1&i[e-1][t+1])&&(r+=1),e-1>=0&&t-1>=0&&0===(1&i[e-1][t-1])&&(r+=1);break;case 3:e+1<i.length&&t+1<i[0].length&&1===(1&i[e+1][t+1])&&(r+=1),e+1<i.length&&t-1>=0&&1===(1&i[e+1][t-1])&&(r+=1),e-1>=0&&t+1<i[0].length&&1===(1&i[e-1][t+1])&&(r+=1),e-1>=0&&t-1>=0&&1===(1&i[e-1][t-1])&&(r+=1);break;case 4:e+1<i.length&&t+1<i[0].length&&0===(1&i[e+1][t+1])&&(r+=1),e+1<i.length&&t-1>=0&&0===(1&i[e+1][t-1])&&(r+=1),e-1>=0&&t+1<i[0].length&&0===(1&i[e-1][t+1])&&(r+=1),e-1>=0&&t-1>=0&&0===(1&i[e-1][t-1])&&(r+=1)}return r}},{key:"backBonus",value:function(e){return 1===this.maximizingPlayer&&0===e||2===this.maximizingPlayer&&7===e?100:0}},{key:"middleBonus",value:function(e,t){return 100-10*(Math.abs(4-t)+Math.abs(4-e))}},{key:"getBoardStatus",value:function(e){var t=e.board.length,i=e.board[0].length;this.numAllyPieces=0,this.numAllyKings=0,this.numOppPieces=0,this.numOppKings=0;for(var r=0;r<t;r++)for(var a=0;a<i;a++)if(1===this.maximizingPlayer)switch(e.board[r][a]){case 1:this.numAllyPieces++;break;case 2:this.numOppPieces++;break;case 3:this.numAllyKings++;break;case 4:this.numOppKings++}else switch(e.board[r][a]){case 1:this.numOppPieces++;break;case 2:this.numAllyPieces++;break;case 3:this.numOppKings++;break;case 4:this.numAllyKings++}}}]),e}(),f={actionsToSend:[],character:"sber",respectfulAppeal:!0,assistantBottomString:"0px",russianRules:!1,backwardDirection:!1,players:[{isRobot:!1},{isRobot:!0}],playerTurn:1,gameOver:!1,playerWin:0,capturedPieces:[0,0],hasArrowSelectedItem:!1,arrowSelectedItemRow:4,arrowSelectedItemCol:4,isContiniousMoving:0,continiousMoving:[],continiousCaptured:[],hasSelectedItem:!1,selectedItemRow:0,selectedItemCol:0,gameBoard:[[0,11,0,21,0,31,0,41],[51,0,61,0,71,0,81,0],[0,91,0,101,0,111,0,121],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[132,0,142,0,152,0,162,0],[0,172,0,182,0,192,0,202],[212,0,222,0,232,0,242,0]]};function w(e){var t=m.EmptyGameStatic();return t.newGame(),t.setCurrentState(e.gameBoard,e.playerTurn,1),t.russianRules=e.russianRules,t.getLegalMoves(t.board)}function v(e,t){var i=[];if(e.gameBoard.forEach((function(e){i.push(e.slice())})),t.listCaptureCol.length>0){var r=t.listCaptureRow[0],a=t.listCaptureCol[0];i[r][a]=0}if(t.listCaptureCol.length>1){var n=i[t.initialRow][t.initialCol];i[t.initialRow][t.initialCol]=0,(7===t.listVisitedRow[0]&&n%10===1||0===t.listVisitedRow[0]&&n%10===2)&&(n+=2),i[t.listVisitedRow[0]][t.listVisitedCol[0]]=n;for(var s=[],o=[],c=0;c<t.listVisitedRow.length;c++)s.push({y:t.listVisitedRow[c],x:t.listVisitedCol[c]}),o.push({y:t.listCaptureRow[c],x:t.listCaptureCol[c]});return e.players[e.playerTurn-1]?Object(u.a)(Object(u.a)({},e),{},{gameBoard:i,isContiniousMoving:1,continiousMoving:s,continiousCaptured:o,hasSelectedItem:!0,selectedItemRow:t.listVisitedRow[0],selectedItemCol:t.listVisitedCol[0],capturedPieces:[e.capturedPieces[0]+(1===e.playerTurn?1:0),e.capturedPieces[1]+(1===e.playerTurn?0:1)]}):Object(u.a)(Object(u.a)({},e),{},{gameBoard:i,isContiniousMoving:1,continiousMoving:s,continiousCaptured:o,hasSelectedItem:!1,capturedPieces:[e.capturedPieces[0]+(1===e.playerTurn?1:0),e.capturedPieces[1]+(1===e.playerTurn?0:1)]})}var l=i[t.startRow][t.startCol];return i[t.startRow][t.startCol]=0,(7===t.endRow&&l%10===1||0===t.endRow&&l%10===2)&&(l+=2),i[t.endRow][t.endCol]=l,t.listCaptureCol.length>0?y(Object(u.a)(Object(u.a)({},e),{},{gameBoard:i,isContiniousMoving:0,hasSelectedItem:!1,capturedPieces:[e.capturedPieces[0]+(1===e.playerTurn?1:0),e.capturedPieces[1]+(1===e.playerTurn?0:1)]})):y(Object(u.a)(Object(u.a)({},e),{},{gameBoard:i,isContiniousMoving:0,hasSelectedItem:!1}))}function y(e){if(e.gameOver)return e;var t=m.EmptyGameStatic();return t.newGame(),t.setCurrentState(e.gameBoard,3-e.playerTurn,3),t.russianRules=e.russianRules,0===t.getLegalMoves(t.board).length?Object(u.a)(Object(u.a)({},e),{},{gameOver:!0,playerWin:e.playerTurn}):Object(u.a)(Object(u.a)({},e),{},{playerTurn:3-e.playerTurn})}function k(e,t,i){if(e.gameOver||e.players[e.playerTurn-1].isRobot)return e;var r=e.gameBoard[t][i];if(r>0){if(r%10===e.playerTurn||r%10===e.playerTurn+2){var a=w(e);if(0!==a.length){var n=null;if(a.forEach((function(e){e.listCaptureRow.length>0?e.initialRow===t&&e.initialCol===i&&(n=e):e.startRow===t&&e.startCol===i&&(n=e)})),null!==n)return Object(u.a)(Object(u.a)({},e),{},{hasSelectedItem:!0,selectedItemRow:t,selectedItemCol:i})}}}else if(0===r&&e.hasSelectedItem){var s=w(e),o=null;if(s.forEach((function(r){r.listCaptureCol.length>0?r.initialRow===e.selectedItemRow&&r.initialCol===e.selectedItemCol&&r.listVisitedRow[0]===t&&r.listVisitedCol[0]===i&&(o=r):r.startRow===e.selectedItemRow&&r.startCol===e.selectedItemCol&&r.endRow===t&&r.endCol===i&&(o=r)})),null!==o){var c=v(e,o);return Object(u.a)({},c)}}return Object(u.a)(Object(u.a)({},e),{},{hasSelectedItem:!1})}function C(e,t){if(e>=1&&e<=32){var i=Math.floor((e-1)/4),r=2*(e-1-4*i)+(i+1)%2;if(t)switch(r){case 0:r=6;break;case 1:r=7;break;case 2:r=4;break;case 3:r=5;break;case 4:r=2;break;case 5:r=3;break;case 6:r=0;break;case 7:r=1}return{row:i,col:r}}}var j,O,R,A,S=function(e,t){switch(t.type){case"character":return Object(u.a)(Object(u.a)({},e),{},{character:t.character_id,respectfulAppeal:"joy"!==t.character_id});case"assistantBottomString":return Object(u.a)(Object(u.a)({},e),{},{assistantBottomString:t.bottomString});case"change_direction":if(console.log("change_direction, userId={action.data?.userId}"),t.data){if(t.data.direction&&1===t.data.direction)return Object(u.a)(Object(u.a)({},e),{},{backwardDirection:!1});if(t.data.direction&&2===t.data.direction)return Object(u.a)(Object(u.a)({},e),{},{backwardDirection:!0})}return Object(u.a)(Object(u.a)({},e),{},{backwardDirection:!e.backwardDirection});case"fire123":if(t.data.n0){var i=C(t.data.n0,e.backwardDirection);if(i)return k(e,i.row,i.col)}else if(t.data.n1&&t.data.n2){var r=C(t.data.n1,e.backwardDirection),a=C(t.data.n2,e.backwardDirection);if(r&&a)return function(e,t,i,r,a){var n=e.gameBoard[t][i],s=e.gameBoard[r][a];if(n>0&&(n%10===e.playerTurn||n%10===e.playerTurn+2)&&0===s){var o=w(e),c=null;if(o.forEach((function(e){e.listCaptureCol.length>0?e.initialRow===t&&e.initialCol===i&&e.listVisitedRow[0]===r&&e.listVisitedCol[0]===a&&(c=e):e.startRow===t&&e.startCol===i&&e.endRow===r&&e.endCol===a&&(c=e)})),null!==c){var l=v(e,c);return Object(u.a)({},l)}}return e}(e,r.row,r.col,a.row,a.col)}return Object(u.a)({},e);case"go":case"go_enemy":return Object(u.a)({},e);case"tile_click":return k(e,t.row,t.column);case"piece_click":return k(e,t.row,t.column);case"arrow_down":return Object(u.a)(Object(u.a)({},e),{},{hasArrowSelectedItem:!0,arrowSelectedItemRow:e.arrowSelectedItemRow>=7?7:e.arrowSelectedItemRow+1});case"arrow_up":return Object(u.a)(Object(u.a)({},e),{},{hasArrowSelectedItem:!0,arrowSelectedItemRow:e.arrowSelectedItemRow>0?e.arrowSelectedItemRow-1:0});case"arrow_right":return Object(u.a)(Object(u.a)({},e),{},{hasArrowSelectedItem:!0,arrowSelectedItemCol:e.arrowSelectedItemCol>=7?7:e.arrowSelectedItemCol+1});case"arrow_left":return Object(u.a)(Object(u.a)({},e),{},{hasArrowSelectedItem:!0,arrowSelectedItemCol:e.arrowSelectedItemCol>0?e.arrowSelectedItemCol-1:0});case"arrow_ok":return e.hasArrowSelectedItem?e.backwardDirection?k(e,7-e.arrowSelectedItemRow,7-e.arrowSelectedItemCol):k(e,e.arrowSelectedItemRow,e.arrowSelectedItemCol):Object(u.a)(Object(u.a)({},e),{},{hasArrowSelectedItem:!0});case"move_robot":var n=m.EmptyGameStatic(),s=new g(e.playerTurn,1);if(n.newGame(),n.setCurrentState(e.gameBoard,e.playerTurn,3),n.russianRules=e.russianRules,0===n.getLegalMoves(n.board).length)return Object(u.a)(Object(u.a)({},e),{},{gameOver:!0,playerWin:3-e.playerTurn});var o=s.alphaBetaSearch(n);return o?(n.applyMove(o,n.board),v(e,o)):e;case"continue_move_by_robot":if(0===e.isContiniousMoving||!e.players[e.playerTurn-1].isRobot)return e;var c=[];e.gameBoard.forEach((function(e){c.push(e.slice())}));var l=e.isContiniousMoving,h=c[e.continiousMoving[l-1].y][e.continiousMoving[l-1].x],d=e.continiousMoving.length-e.isContiniousMoving;return c[e.continiousMoving[l-1].y][e.continiousMoving[l-1].x]=0,c[e.continiousCaptured[l].y][e.continiousCaptured[l].x]=0,(7===e.continiousMoving[l].y&&h%10===1||0===e.continiousMoving[l].y&&h%10===2)&&(h+=2),c[e.continiousMoving[l].y][e.continiousMoving[l].x]=h,d>1?Object(u.a)(Object(u.a)({},e),{},{gameBoard:c,isContiniousMoving:e.isContiniousMoving+1,capturedPieces:[e.capturedPieces[0]+(1===e.playerTurn?1:0),e.capturedPieces[1]+(1===e.playerTurn?0:1)]}):y(Object(u.a)(Object(u.a)({},e),{},{gameBoard:c,isContiniousMoving:0,capturedPieces:[e.capturedPieces[0]+(1===e.playerTurn?1:0),e.capturedPieces[1]+(1===e.playerTurn?0:1)]}));default:throw new Error}},x=i(3),I=i(10),T=i(23),M=i(6),B=i(11),N=i(2),D=["0%","12.5%","25%","37.5%","50%","62.5%","75%","87.5%","100%","100%"],E=[[0,1,0,2,0,3,0,4],[5,0,6,0,7,0,8,0],[0,9,0,10,0,11,0,12],[13,0,14,0,15,0,16,0],[0,17,0,18,0,19,0,20],[21,0,22,0,23,0,24,0],[0,25,0,26,0,27,0,28],[29,0,30,0,31,0,32,0]],V=[[0,29,0,30,0,31,0,32],[25,0,26,0,27,0,28,0],[0,21,0,22,0,23,0,24],[17,0,18,0,19,0,20,0],[0,13,0,14,0,15,0,16],[9,0,10,0,11,0,12,0],[0,5,0,6,0,7,0,8],[1,0,2,0,3,0,4,0]],P=Object(x.createGlobalStyle)(I.sberBox),_=Object(x.createGlobalStyle)(I.sberPortal),G=Object(x.createGlobalStyle)(I.mobile),L=Object(x.createGlobalStyle)(j||(j=Object(c.a)(["\n    /* stylelint-disable-next-line selector-nested-pattern */\n    html {\n        color: ",";\n        background-color: ",";\n        background-image: ",";\n\n        /** \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043b\u0438\u0442\u044c \u0433\u0440\u0430\u0434\u0438\u0435\u043d\u0442\u043e\u043c \u0432\u0441\u044e \u043f\u043e\u0434\u043b\u043e\u0436\u043a\u0443 */\n        min-height: 100vh;\n    }\n"])),M.text,M.background,M.gradient),z=Object(x.createGlobalStyle)(B.darkEva),F=Object(x.createGlobalStyle)(B.darkSber),J=Object(x.createGlobalStyle)(B.darkJoy),K=Object(r.memo)((function(){var e=Object(r.useReducer)(S,f),t=Object(o.a)(e,2),i=t[0],a=t[1],n=Object(r.useRef)(),s=Object(r.useRef)();function u(e){"ArrowDown"===e.key&&(e.preventDefault(),a({type:"arrow_down"})),"ArrowUp"===e.key&&(e.preventDefault(),a({type:"arrow_up"})),"ArrowLeft"===e.key&&(e.preventDefault(),a({type:"arrow_left"})),"ArrowRight"===e.key&&(e.preventDefault(),a({type:"arrow_right"})),"Enter"===e.key&&(e.preventDefault(),a({type:"arrow_ok"}))}function h(e){}function d(e,t,i){i.preventDefault(),a({type:"tile_click",row:e,column:t})}function b(e){for(var t=[],r=[],n=[],s=0,o=function(n){for(var o=function(o){var c=i.gameBoard[n][o],l=c%10;if(l===e||l===e+2){var u=3===l?{top:i.backwardDirection?D[7-n]:D[n],left:i.backwardDirection?D[7-o]:D[o],backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC+ElEQVRYR9VWMVbbQBD9I96z3YWcADgBpkisLqYIWqrYJwCfIHACyAkgJ8A5AaRilxSQTk4KzAkwJwh0dvKsyZtF68hCsi3DC8mW0uzO3z9//izhmRc9c3783wC0r86J+TbomOa8TM7NwNmrt1VeWLiUxDQcrm18/9KdB8TcAIyv2gC24qSfglBv/zUAp75a9oBrZv5sGSB6FwErm6HuFQUxFwPGV/sA9iJgXRJ6wDmAD0Go5XuhVRjAebW++LNcvgZwE3RMVbKZWiD1XyoNBivr3YvbIgjI+GoPUXQVfDs7mWXjma+2GTgioLURatEBsr5NO8u83mjA81bJ1IJbEL0A82HQMbvTNmpfye1JhXo5Gat9JfVnFeqVaWeYWnAAoh0w35GuBYdE9F42MXBR7vebeTTGqI+z6u10gShq5rFpxct8DCJbOmb+SE7RgkaYYKDnDYfNrL6OjWetNBgsp0FabVQqP+QSKtRWnMl16qt6nHzR5ZLOsSJ0IgJzC0RSVyaiXVdjW+c/xpPb884b0i1pdQbsS+KIqBEDuQpCXbcAkiLCcNhlz2uDaJWBtgp1y4KMjWdSv4/YBCxIYWVQqRwTUAfwtdTvN35VKo2kiC2AuLV6THQp9NmN5XJbDAbMXYqiltiuGI/qmMYkkRlfXQB4Ix7hKJdaq47ZkX3pMo58IOuGuhbsENGBSyiHboZaEuQuW+t7YxKV3YF524kyzZCEjAAkajzmaLF4xCN6znhmaDM7mKTeSXt2HZccXmNOmNfLUhI5sKjLpYFmecg4AEf5hF6edvu8/85DmHlXdcyhixsDMOrlGcRWFIiuBSci6lK//zLJ5INhlBdYNGEy3l0McXsm/z0AkEfVYwCMuimjtJnjuMhgmQVY3gAba8PkQW6wiK/PkmBaTOyEmQ+WTAbiqdW1Y/op1v0MqGY92Qq/iJ4Cz0QRup/aV0cAxh4dj0jec0MtfUYuAyJEApYekXS0lYGb9Asq04ieIlnRM/5dDRS9ybzxvwFIdrAs1qT1KgAAAABJRU5ErkJggg==)"}:4===l?{top:i.backwardDirection?D[7-n]:D[n],left:i.backwardDirection?D[7-o]:D[o],backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACyElEQVRYR9VWwVEbQRDsgdMbHIFFBIgIDBEgRWARgdFjl+IFflHcPoAIkCMAIkCOwBABcgSGt4TaNVe7qtVxJ+lOLmPv8253p6enp2cF77zknePj/wbgHO9JPFsrnbpM1mYgTdkSwQ8NTGLHWnmoA6I2AOfYB/DZB/1mjHT/GoCzMzaTBE8A7nzQ/fEYW8fHMqwKohYDzvEUwAmAPR/wHsBXY0S/V1qVAVxccHM8zrL/aYy0NJpz1Pp/TBJs9XryXAWBOMeTyQSPR0dyu8zBNGVXBNckDqwV1QGKvi266/yc7bU1bEua8lkEGwAujZHeooNpyicRiDHSjPc6xyEJWitbi+5wjhcADkm8KIBLEXzxhwZJgk4ZjR71TVG9gy4mE3TK2FTxrq/jRgRZ6UhcSVB0hkawQUKV3Cnqa288O40GmnmQXhu/AAyMkSDOKRnOcReAgt8MsbRzMhEGEU0mOBBBXwQk0Qs19nUOxlPa88Eb8i2pOgNw6gO3FQiJR2tlNwMQiwjAg4IAsE2ib60ceJCZ8czr98gfMpCeFc16l8T3RgPt0QjtWMQZAN04GmGo1qr0+YMacJ+Etpgyo7Z7Z4xoBqUrTTkQwSfvEYHyK2vl0Cei82NaxqkPFNHnHPWQKjasPWNkMA+Ar7Uak4rshUQ3iDLPkO6ZAoiGy4yj6YUkbkUwDMazRJtlg2k8Rju259Bx8fCaccKyXtaS6IVVXS4PtMhD8gAyyuf18qLsy/5HHtIzRi7DvhkAUS8vFFtVIM5RrX4/SfAhZvLNMCrbWDVgvD9K7I2HvAFQRtUqAEI3FZW2cBxXGSzLACsbYDNtGF8UPTjm9vwywf0enQOFD5ZCBvzUUkvWMb3yUkN6fUWr6MlW+UW0MprcBaUA0pTXIph5dNQNriM+DLX8HaUAVIj6zqsbNHdO34+Fyfy7JfhDmS+85t0Z+A3L4JeX/JQtUQAAAABJRU5ErkJggg==)"}:{top:i.backwardDirection?D[7-n]:D[n],left:i.backwardDirection?D[7-o]:D[o]},h=i.hasSelectedItem&&i.selectedItemRow===n&&i.selectedItemCol===o?"piece selected":"piece",d=(i.backwardDirection?V[7-n][7-o]:E[n][o]).toString();t.push(Object(N.jsx)("div",{className:h,id:"piece"+Math.floor(c/10).toString(),style:u,onClick:function(e){return function(e,t,i){i.preventDefault(),a({type:"piece_click",row:e,column:t})}(n,o,e)},children:d},Math.floor(c/10).toString())),r.push({checker:c,idx:s}),s++}},c=0;c<i.gameBoard[n].length;c++)o(c)},c=0;c<i.gameBoard.length;c++)o(c);r.sort((function(e,t){return e.checker-t.checker}));for(var l=0;l<r.length;l++)n.push(t[r[l].idx]);return n}function p(e){for(var t=[],r=0;r<i.capturedPieces[e-1];r++)t.push(Object(N.jsx)("div",{className:"capturedPiece"}));return t}Object(r.useEffect)((function(){var e;s.current=(e=function(){return n.current},console.log("process.env.NODE_ENV="),console.log("production"),Object(l.a)({getState:e})),s.current.on("data",(function(e){var t,i=e.type,r=e.character,n=(e.navigation,e.action),o=e.insets;e.command;(r&&a({type:"character",character_id:r.id}),n&&a(n),o&&a({type:"assistantBottomString",bottomString:o.bottom.toString()+"px"}),"close_app"===i)&&(null===s||void 0===s||null===(t=s.current)||void 0===t||t.close())}))}),[]),Object(r.useEffect)((function(){return window.addEventListener("keydown",u),window.addEventListener("keyup",h),function(){window.removeEventListener("keydown",u),window.removeEventListener("keyup",h)}})),Object(r.useEffect)((function(){i.players[i.playerTurn-1].isRobot&&(0!==i.isContiniousMoving?setTimeout((function(){a({type:"continue_move_by_robot"})}),3100):setTimeout((function(){a({type:"move_robot"})}),410))}),[i.isContiniousMoving,i.playerTurn,i.players]);var m=x.default.div(O||(O=Object(c.a)(["\n  width: 100%;\n  height: calc(100vh - ",");\n  padding: 0;\n  box-sizing: border-box;\n  text-align: center;\n\n  display: flex;\n\n  flex-direction: row;\n  @media (min-aspect-ratio: 1/1)  {\n    height: 100vh;\n  }\n  \n  justify-content: space-around;\n\n  @media (max-aspect-ratio: 1/1)  {\n    flex-direction: column;\n  }\n  \n  overflow:auto;\n\n  ","\n"])),i.assistantBottomString,M.body1),g=x.default.div(R||(R=Object(c.a)(["\n  @media (min-aspect-ratio: 1/1)  {\n    background-size: cover;\n    max-width: calc(100vw - calc(100vmin - ","));\n  }\n\n  @media (max-aspect-ratio: 1/1)  {\n    background-size: cover;\n    width: 100wv;\n  }\n\n"])),i.assistantBottomString),w=x.default.div(A||(A=Object(c.a)(["\n  @media (min-aspect-ratio: 1/1)  {\n    height: calc(100vmin - ",");\n    flex: 0 0 calc(100vmin - ",");\n  }\n\n  @media (max-aspect-ratio: 1/1)  {\n\n    display: flex;\n    align-items: center;\n    justify-content:center;\n    --h:100vh;\n    height:var(--h);\n  }\n  \n\n"])),i.assistantBottomString,i.assistantBottomString);return Object(N.jsxs)(m,{children:[function(){switch(Object(T.detectDevice)()){case"sberPortal":return Object(N.jsx)(P,{});case"sberBox":return Object(N.jsx)(_,{});case"mobile":return Object(N.jsx)(G,{});default:return}}(),Object(N.jsx)(L,{}),function(){switch(i.character){case"sber":return Object(N.jsx)(F,{});case"eva":return Object(N.jsx)(z,{});case"joy":return Object(N.jsx)(J,{});default:return}}(),Object(N.jsx)(g,{children:Object(N.jsxs)("div",{className:"stats",children:[Object(N.jsx)("h2",{children:"\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0435 \u0448\u0430\u0448\u043a\u0438"}),Object(N.jsxs)("div",{className:"wrapper",children:[Object(N.jsxs)("div",{id:"player1",children:[Object(N.jsxs)("h3",{children:["\u0418\u0433\u0440\u043e\u043a 1 (",i.backwardDirection?"\u0412\u043d\u0438\u0437\u0443":"\u0421\u0432\u0435\u0440\u0445\u0443",")"]}),p(1)]}),Object(N.jsxs)("div",{id:"player2",children:[Object(N.jsxs)("h3",{children:["\u0418\u0433\u0440\u043e\u043a 2 (",i.backwardDirection?"\u0412\u0432\u0435\u0440\u0445\u0443":"\u0412\u043d\u0438\u0437\u0443",")"]}),p(2)]})]}),Object(N.jsx)("div",{className:"clearfix"}),Object(N.jsx)("div",{className:"turn",style:1===i.playerTurn?{background:"linear-gradient(to right, var(--plasma-colors-accent) 50%, transparent 50%)"}:{background:"linear-gradient(to right, transparent 50%, var(--plasma-colors-accent) 50%)"}}),Object(N.jsx)("span",{id:"winner",children:i.gameOver?"\u0418\u0433\u0440\u043e\u043a "+i.playerWin+" \u043f\u043e\u0431\u0435\u0434\u0438\u043b!":""})]})}),Object(N.jsx)(w,{children:Object(N.jsxs)("div",{id:"board",onKeyDown:function(e){console.debug("key")},children:[Object(N.jsx)("div",{className:"tiles",children:function(){for(var e=[],t=0,r=function(r){for(var a=function(a){if(r%2===1){if(a%2===0){var n={top:i.backwardDirection?D[7-r]:D[r],left:i.backwardDirection?D[7-a]:D[a],color:"#FF3333"},s=(i.backwardDirection?V[7-r][7-a]:E[r][a]).toString();i.gameBoard[r][a]>0&&(s=""),e.push(Object(N.jsx)("div",{className:"tile",id:"tile"+t.toString(),style:n,onClick:function(e){return d(r,a,e)},children:s},t.toString())),t++}}else if(a%2===1){var o={top:i.backwardDirection?D[7-r]:D[r],left:i.backwardDirection?D[7-a]:D[a],color:"#FF3333"},c=(i.backwardDirection?V[7-r][7-a]:E[r][a]).toString();i.gameBoard[r][a]>0&&(c=""),e.push(Object(N.jsx)("div",{className:"tile",id:"tile"+t.toString(),style:o,onClick:function(e){return d(r,a,e)},children:c},t.toString())),t++}},n=0;n<i.gameBoard[r].length;n++)a(n)},a=0;a<i.gameBoard.length;a++)r(a);return e}()}),Object(N.jsxs)("div",{className:"pieces",children:[Object(N.jsx)("div",{className:"player1pieces",children:b(1)}),Object(N.jsx)("div",{className:"player2pieces",children:b(2)})]}),Object(N.jsx)("div",{className:"pult",children:function(){var e=[];if(i.hasArrowSelectedItem){var t={top:D[i.arrowSelectedItemRow],left:D[i.arrowSelectedItemCol]};e.push(Object(N.jsx)("div",{className:"selection",style:t}))}return e}()})]})})]})})),U=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,78)).then((function(t){var i=t.getCLS,r=t.getFID,a=t.getFCP,n=t.getLCP,s=t.getTTFB;i(e),r(e),a(e),n(e),s(e)}))};s.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(K,{})}),document.getElementById("root")),U()}},[[77,1,2]]]);
//# sourceMappingURL=main.17dcceaa.chunk.js.map